<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏–º—É–ª—è—Ç–æ—Ä –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –°–µ—Ç–∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤</title>
    <style>
        :root {
            --primary-dark: #0a0e27;
            --surface: #151922;
            --text: #e0e0e0;
            --accent-green: #00ff41;
            --accent-orange: #ffaa00;
            --accent-red: #ff3333;
            --accent-blue: #00aaff;
            --border: #2a2e3a;
        }

        [data-theme="light"] {
            --primary-dark: #ffffff;
            --surface: #f5f5f5;
            --text: #1a1a1a;
            --accent-green: #28a745;
            --accent-orange: #ffc107;
            --accent-red: #dc3545;
            --accent-blue: #0066cc;
            --border: #cccccc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-dark);
            color: var(--text);
            overflow: hidden;
            height: 100vh;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Left Panel - Configuration */
        .left-panel {
            width: 300px;
            background: var(--surface);
            border-right: 2px solid var(--border);
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent-blue);
            margin-bottom: 10px;
            text-shadow: 0 0 10px var(--accent-blue);
        }

        .config-group {
            background: rgba(42, 46, 58, 0.5);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .config-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--accent-blue);
        }

        .size-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .size-btn {
            flex: 1;
            padding: 10px;
            background: rgba(0, 170, 255, 0.1);
            border: 2px solid var(--accent-blue);
            color: var(--accent-blue);
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .size-btn:hover {
            background: rgba(0, 170, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 170, 255, 0.3);
        }

        .size-btn.active {
            background: var(--accent-blue);
            color: var(--primary-dark);
            box-shadow: 0 0 20px var(--accent-blue);
        }

        .slider-container {
            margin-top: 10px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .slider-value {
            color: var(--accent-green);
            font-weight: bold;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            background: rgba(0, 255, 65, 0.2);
            outline: none;
            border-radius: 3px;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-green);
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 10px var(--accent-green);
        }

        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent-green);
            cursor: pointer;
            border-radius: 50%;
            border: none;
            box-shadow: 0 0 10px var(--accent-green);
        }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-start {
            background: var(--accent-green);
            color: var(--primary-dark);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }

        .btn-start:hover:not(:disabled) {
            box-shadow: 0 0 30px var(--accent-green);
            transform: translateY(-2px);
        }

        .btn-stop {
            background: var(--accent-red);
            color: white;
            box-shadow: 0 0 20px rgba(255, 51, 51, 0.5);
        }

        .btn-stop:hover:not(:disabled) {
            box-shadow: 0 0 30px var(--accent-red);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Center Canvas */
        .center-canvas {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        canvas {
            width: 100%;
            height: 100%;
            background: var(--primary-dark);
        }

        /* Right Panel - Report */
        .right-panel {
            width: 320px;
            background: var(--surface);
            border-left: 2px solid var(--border);
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .report-section {
            background: rgba(42, 46, 58, 0.5);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .report-title {
            font-size: 16px;
            font-weight: bold;
            color: var(--accent-green);
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--accent-green);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(42, 46, 58, 0.5);
            font-size: 13px;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: var(--text);
        }

        .stat-value {
            color: var(--accent-green);
            font-weight: bold;
        }

        .legend {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--border);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--surface);
            border: 2px solid var(--accent-blue);
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 50px rgba(0, 170, 255, 0.5);
        }

        .modal-title {
            font-size: 22px;
            font-weight: bold;
            color: var(--accent-red);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 15px var(--accent-red);
        }

        .modal-content {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .conflict-info {
            background: rgba(255, 51, 51, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-red);
            margin-bottom: 20px;
        }

        .conflict-nodes {
            color: var(--accent-orange);
            font-weight: bold;
        }

        .algorithm-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .algo-btn {
            padding: 12px;
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid var(--accent-green);
            color: var(--accent-green);
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .algo-btn:hover {
            background: var(--accent-green);
            color: var(--primary-dark);
            box-shadow: 0 0 20px var(--accent-green);
        }

        /* Final Report Modal */
        .final-report {
            max-width: 700px;
        }

        .final-report .modal-title {
            color: var(--accent-green);
            text-shadow: 0 0 15px var(--accent-green);
        }

        .report-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .report-card {
            background: rgba(0, 255, 65, 0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-green);
        }

        .report-card-title {
            font-size: 12px;
            color: var(--text);
            margin-bottom: 5px;
        }

        .report-card-value {
            font-size: 24px;
            color: var(--accent-green);
            font-weight: bold;
        }

        .close-btn {
            width: 100%;
            padding: 12px;
            background: var(--accent-blue);
            color: var(--primary-dark);
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            box-shadow: 0 0 20px var(--accent-blue);
            transform: translateY(-2px);
        }

        .controller-stats {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .controller-card {
            background: rgba(42, 46, 58, 0.5);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }

        .controller-name {
            color: var(--accent-blue);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .controller-stat {
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .left-panel, .right-panel {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            .left-panel, .right-panel {
                width: 100%;
                height: auto;
                max-height: 30vh;
            }
        }

        .paused-indicator {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-orange);
            color: var(--primary-dark);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            display: none;
            z-index: 100;
            box-shadow: 0 0 30px var(--accent-orange);
        }

        .paused-indicator.active {
            display: block;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--surface);
            border: 2px solid var(--accent-blue);
            color: var(--accent-blue);
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            z-index: 200;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 170, 255, 0.3);
        }

        .theme-toggle:hover {
            background: var(--accent-blue);
            color: var(--primary-dark);
            box-shadow: 0 0 25px var(--accent-blue);
            transform: translateY(-2px);
        }

        .feedback-message {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            display: none;
            z-index: 150;
            animation: fadeInOut 2s ease-in-out;
        }

        .feedback-message.good {
            background: var(--accent-green);
            color: var(--primary-dark);
            box-shadow: 0 0 30px var(--accent-green);
        }

        .feedback-message.poor {
            background: var(--accent-red);
            color: white;
            box-shadow: 0 0 30px var(--accent-red);
        }

        .feedback-message.active {
            display: block;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }

        .decision-streak {
            background: rgba(0, 170, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--accent-blue);
            margin-top: 10px;
            text-align: center;
        }

        .streak-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-blue);
        }

        .streak-label {
            font-size: 11px;
            color: var(--text);
            margin-top: 4px;
        }
    </style>
    <!-- NEW: Algorithm Help Button and Modal -->
    <style>
        .goal-banner {
            background: rgba(0, 255, 65, 0.08);
            color: #00ff41;
            font-size: 17px;
            font-weight: bold;
            text-align: center;
            padding: 16px 0 12px 0;
            border-bottom: 3px solid #00ff41;
            letter-spacing: 0.01em;
            box-shadow: 0 4px 16px rgba(0,255,65,0.13);
            position: relative;
        }
        .algo-help-btn {
            position: absolute;
            right: 24px;
            top: 10px;
            background: #222;
            color: #00aaff;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            border: 2px solid #00aaff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0,170,255,0.25);
            z-index: 30;
            transition: all 0.2s;
        }
        .algo-help-btn:hover {
            background: #00aaff;
            color: #fff;
        }
        .algo-expl-modal {
            background: var(--surface);
            border: 3px solid #00aaff;
            border-radius: 16px;
            max-width: 540px;
            width: 97vw;
            padding: 30px 26px 22px 26px;
            z-index: 1600;
            position: fixed;
            top: 48px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 30px 7px rgba(0,170,255,.23);
            color: var(--text);
        }
        .algo-expl-heading {
            font-size: 24px;
            color: #00aaff;
            font-weight: bold;
            margin-bottom: 18px;
            text-align: center;
            letter-spacing: 0.01em;
        }
        .algo-expl-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .algo-expl-li {
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 1.5px solid #2a2e3a;
        }
        .algo-expl-li:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .algo-expl-title {
            font-size: 17px;
            font-weight: bold;
            color: #00ff41;
            margin-bottom: 4px;
        }
        .algo-expl-desc { font-size: 14.5px; color: #00aaff; }
        .algo-expl-pros, .algo-expl-cons { color: #ffaa00; font-size: 13.4px; margin-top: 1px; }
        .algo-expl-when {
            color: #00aaff;
            font-size: 12.9px;
            margin-top: 6px;
        }
        .algo-expl-close {
            display: block;
            margin: 0 auto;
            margin-top: 17px;
            padding: 10px 28px;
            border-radius: 8px;
            border: none;
            background: #00aaff;
            font-weight: bold;
            color: var(--primary-dark);
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 0 13px #00aaff66;
            transition: background 0.2s;
        }
        .algo-expl-close:hover { background: #0090dd; color: #fff; }
        /* Mission Status in Final Modal */
        .mission-status {
            font-size: 25px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 22px;
            border-radius: 10px;
            padding: 18px 0 14px 0;
        }
        .mission-success {
            background: rgba(0,255,65,0.13);
            color: #00ff41;
            border: 2.5px solid #00ff41;
        }
        .mission-partial {
            background: rgba(255,170,0,0.12);
            color: #ffaa00;
            border: 2.5px solid #ffaa00;
        }
        .mission-failed {
            background: rgba(255,51,51,0.13);
            color: #ff3333;
            border: 2.5px solid #ff3333;
        }
        /* Progress Bar for 80% Goal */
        .eff-progress-outer {
            background: #222; border-radius: 14px;
            height: 28px; margin: 16px 0 11px 0;
            position: relative; width: 100%;
            overflow: hidden;
        }
        .eff-progress-bar {
            height: 100%; transition: width .7s cubic-bezier(.19,1,.22,1);
            border-radius: 14px;
            position: absolute; left: 0;
            top: 0; z-index: 2;
        }
        .eff-progress-label {
            position: absolute; left: 49%; top: 0;
            width: 120px; text-align: center;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            color: #fff;
            z-index: 5;
            text-shadow: 0 2px 7px #191;
            pointer-events: none;
        }
        .eff-marker-target {
            position: absolute;
            left: 80%;
            top: -10px;
            width: 0;
            height: 48px;
            border-left: 2.7px dashed #ffaa00;
            z-index: 3;
        }
        .eff-marker-label {
            position: absolute;
            left: 80%;
            top: 35px;
            color: #ffaa00;
            font-weight: bold;
            font-size: 13px;
            transform: translateX(-30%);
            z-index: 4;
            text-shadow: 0 0px 6px #ffaa0044;
        }
    </style>
</head>
<body>
    <!-- NEW: GOAL BANNER & ALGORITHM HELP BTN -->
    <div class="goal-banner">
        <span>–¶–ï–õ–¨: –î–æ—Å—Ç–∏—á—å 80% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</span>
        <button class="algo-help-btn" id="algoHelpBtn" title="–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã?">?</button>
    </div>
    <!-- Algorithm Explanation Modal -->
    <div class="modal-overlay" id="algoExpModal" style="display:none;z-index:1600;">
        <div class="algo-expl-modal">
            <div class="algo-expl-heading">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã?</div>
            <ul class="algo-expl-list">
                <li class="algo-expl-li">
                    <div class="algo-expl-title">–ü–†–ò–û–†–ò–¢–ï–¢ (Priority-based)</div>
                    <div class="algo-expl-desc">–î–∞—ë—Ç —Ä–µ—Å—É—Ä—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É —Å –ù–ê–ò–ë–û–õ–¨–®–ò–ú –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º.</div>
                    <div class="algo-expl-pros">–ü–ª—é—Å—ã: ‚úì –í–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å</div>
                    <div class="algo-expl-cons">–ú–∏–Ω—É—Å—ã: ‚úó –ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –º–æ–≥—É—Ç –≥–æ–ª–æ–¥–∞—Ç—å</div>
                    <div class="algo-expl-when"><b>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b> –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Å—Ä–æ—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤–∞–∂–Ω–æ–π –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã</div>
                </li>
                <li class="algo-expl-li">
                    <div class="algo-expl-title">–û–ß–ï–†–ï–î–¨ (FIFO Queue)</div>
                    <div class="algo-expl-desc">–î–∞—ë—Ç —Ä–µ—Å—É—Ä—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—Ä–æ—Å–∏–ª –µ–≥–æ –ü–ï–†–í–´–ú.</div>
                    <div class="algo-expl-pros">–ü–ª—é—Å—ã: ‚úì –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ, –Ω–∏–∫—Ç–æ –Ω–µ –≥–æ–ª–æ–¥–∞–µ—Ç</div>
                    <div class="algo-expl-cons">–ú–∏–Ω—É—Å—ã: ‚úó –ú–æ–∂–µ—Ç –Ω–µ –æ—Ç–¥–∞—Ç—å –±—ã—Å—Ç—Ä–æ —Ä–µ—Å—É—Ä—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —Å–∏—Å—Ç–µ–º–∞–º</div>
                    <div class="algo-expl-when"><b>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b> –ö–æ–≥–¥–∞ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–∞–∂–Ω—ã</div>
                </li>
                <li class="algo-expl-li" >
                    <div class="algo-expl-title">–°–ü–†–ê–í–ï–î–õ–ò–í–û–ï (Random Fair)</div>
                    <div class="algo-expl-desc">–í—ã–±–∏—Ä–∞–µ—Ç –°–õ–£–ß–ê–ô–ù–û–ì–û –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏–∑ –ø—Ä–µ—Ç–µ–Ω–¥–µ–Ω—Ç–æ–≤.</div>
                    <div class="algo-expl-pros">–ü–ª—é—Å—ã: ‚úì –ë–µ—Å–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–æ, –¥–∞–µ—Ç —à–∞–Ω—Å –≤—Å–µ–º</div>
                    <div class="algo-expl-cons">–ú–∏–Ω—É—Å—ã: ‚úó –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–∞—á–Ω–æ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –∂–¥–∞—Ç—å</div>
                    <div class="algo-expl-when"><b>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b> –ö–æ–≥–¥–∞ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞—Ö</div>
                </li>
            </ul>
            <button class="algo-expl-close" id="algoExpModalClose">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div class="app-container">
        <!-- Left Panel: Configuration -->
        <div class="left-panel">
            <div class="panel-title">‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –°–∏—Å—Ç–µ–º—ã</div>
            
            <div class="config-group">
                <label class="config-label">–†–∞–∑–º–µ—Ä —Å–∏—Å—Ç–µ–º—ã</label>
                <div class="size-buttons">
                    <button class="size-btn" data-size="small">–ú–∞–ª–∞—è</button>
                    <button class="size-btn active" data-size="medium">–°—Ä–µ–¥–Ω—è—è</button>
                    <button class="size-btn" data-size="large">–ë–æ–ª—å—à–∞—è</button>
                </div>
            </div>

            <div class="config-group">
                <label class="config-label">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤</label>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞</span>
                        <span class="slider-value" id="probabilityValue">60%</span>
                    </div>
                    <input type="range" id="probabilitySlider" min="0" max="100" value="60">
                </div>
            </div>

            <div class="config-group">
                <div class="slider-container">
                    <div class="slider-label">
                        <span>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏</span>
                        <span class="slider-value" id="durationValue">45—Å</span>
                    </div>
                    <input type="range" id="durationSlider" min="10" max="100" value="45">
                </div>
            </div>

            <div class="control-buttons">
                <button class="btn btn-start" id="startBtn">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button class="btn btn-stop" id="stopBtn" disabled>‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <div class="config-group">
                <label class="config-label">–õ–µ–≥–µ–Ω–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π</label>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #666;"></div>
                        <span>IDLE - –û–∂–∏–¥–∞–Ω–∏–µ</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--accent-green);"></div>
                        <span>EXECUTING - –†–∞–±–æ—Ç–∞</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--accent-red);"></div>
                        <span>CONFLICT - –ö–æ–Ω—Ñ–ª–∏–∫—Ç</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--accent-orange);"></div>
                        <span>WAITING - –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Center: Canvas Visualization -->
        <div class="center-canvas">
            <button class="theme-toggle" id="themeToggle">üåô –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</button>
            <div class="paused-indicator" id="pausedIndicator">‚è∏ –ü–ê–£–ó–ê</div>
            <div class="feedback-message" id="feedbackMessage"></div>
            <canvas id="canvas"></canvas>
        </div>

        <!-- Right Panel: Real-time Report -->
        <!-- Progress bar for 80% goal: positioned in right panel top -->
        <div class="right-panel">
            <div class="panel-title">üìä –û—Ç—á—ë—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</div>
            
            <!-- PROGRESS BAR FOR EFFICIENCY (80% goal) -->
            <div style="margin-bottom: 15px;">
                <div class="eff-progress-outer">
                    <div id="effProgressBar" class="eff-progress-bar" style="background: #00ff41; width: 70%;"></div>
                    <div class="eff-marker-target"></div>
                    <span class="eff-progress-label" id="effProgressLabel">70.0%</span>
                    <span class="eff-marker-label">–¶–µ–ª—å: 80%</span>
                </div>
            </div>
            
            <div class="report-section">
                <div class="report-title">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="stat-row">
                    <span class="stat-label">‚è± –ü—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏:</span>
                    <span class="stat-value" id="elapsedTime">0.0—Å</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">‚ö†Ô∏è –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:</span>
                    <span class="stat-value" id="conflictsProcessed">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">üéØ –£—Å–ø–µ—à–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:</span>
                    <span class="stat-value" id="successfulResolutions">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">‚úÖ –û–ø–µ—Ä–∞—Ü–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ:</span>
                    <span class="stat-value" id="operationsCompleted">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                    <span class="stat-value" id="efficiency">70%</span>
                </div>
            </div>

            <div class="report-section">
                <div class="report-title">–†–µ—à–µ–Ω–∏—è</div>
                <div class="decision-streak">
                    <div class="streak-value" id="streakValue">0</div>
                    <div class="streak-label" id="streakLabel">–ü–æ–¥—Ä—è–¥ —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π</div>
                </div>
            </div>

            <div class="report-section">
                <div class="report-title">–ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤</div>
                <div id="conflictLog" style="max-height: 300px; overflow-y: auto; font-size: 12px;">
                    <div style="color: #666; text-align: center; padding: 20px;">–ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conflict Modal -->

    <div class="modal-overlay" id="conflictModal">
        <div class="modal">
            <div class="modal-title">‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù –ö–û–ù–§–õ–ò–ö–¢!</div>
            <div class="modal-content">
                <div class="conflict-info">
                    <div style="margin-bottom: 10px;">
                        <strong>–ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ —É–∑–ª—ã:</strong>
                        <div class="conflict-nodes" id="conflictNodes">Node 1, Node 2</div>
                    </div>
                    <div>
                        <strong>–†–µ—Å—É—Ä—Å:</strong> <span id="conflictResource" style="color: var(--accent-blue);">Resource X</span>
                    </div>
                </div>
                <p style="margin-bottom: 15px;">–í—ã–±–µ—Ä–∏—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:</p>
                <div class="algorithm-buttons">
                    <button class="algo-btn" data-algo="priority">üî¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º</button>
                    <button class="algo-btn" data-algo="timestamp">‚è∞ –ê–ª–≥–æ—Ä–∏—Ç–º –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫</button>
                    <button class="algo-btn" data-algo="token">üé´ –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–∞</button>
                    <button class="algo-btn" data-algo="voting">üó≥Ô∏è –ê–ª–≥–æ—Ä–∏—Ç–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Final Report Modal -->
    <div class="modal-overlay" id="finalModal">
            <!-- --- MISSION STATUS --- -->
            <div id="missionStatusBanner" class="mission-status mission-failed" style="display:none;">–ú–ò–°–°–ò–Ø –ü–†–û–í–ê–õ–ï–ù–ê ‚úó</div>

        <div class="modal final-report">
            <div class="modal-title">üìä –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢</div>
            <div class="modal-content">
                <div class="report-grid">
                    <div class="report-card">
                        <div class="report-card-title">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏</div>
                        <div class="report-card-value" id="finalDuration">0—Å</div>
                    </div>
                    <div class="report-card">
                        <div class="report-card-title">–í—Å–µ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤</div>
                        <div class="report-card-value" id="finalConflicts">0</div>
                    </div>
                    <div class="report-card">
                        <div class="report-card-title">–£—Å–ø–µ—à–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π</div>
                        <div class="report-card-value" id="finalResolutions">0</div>
                    </div>
                    <div class="report-card">
                        <div class="report-card-title">–û–ø–µ—Ä–∞—Ü–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        <div class="report-card-value" id="finalOperations">0</div>
                    </div>
                    <div class="report-card">
                        <div class="report-card-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                        <div class="report-card-value" id="finalEfficiency">0%</div>
                    </div>
                </div>

                <div class="report-section">
                    <div class="report-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤</div>
                    <div class="controller-stats" id="controllerStats"></div>
                </div>

                <button class="close-btn" id="closeFinalModal">–ó–∞–∫—Ä—ã—Ç—å –æ—Ç—á—ë—Ç</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>