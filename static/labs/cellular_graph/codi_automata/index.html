<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–µ—Ç–æ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body class="dark-theme">
  <header class="header">
    <div class="header-content">
      <h1>–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–µ—Ç–æ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã</h1>
      <p>–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–µ—Ç–æ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞</p>
    </div>
    <button id="theme-toggle" class="theme-toggle">üåì</button>
  </header>

  <main class="main-container">
    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="control-panel">
      <section class="control-section">
        <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∫–∏</h3>
        <div class="input-group">
          <label for="grid-width">–®–∏—Ä–∏–Ω–∞:</label>
          <input type="number" id="grid-width" value="50" min="10" max="200"/>
        </div>
        <div class="input-group">
          <label for="grid-height">–í—ã—Å–æ—Ç–∞:</label>
          <input type="number" id="grid-height" value="50" min="10" max="200"/>
        </div>
        <div class="input-group">
          <label for="cell-size">–†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏:</label>
          <input type="number" id="cell-size" value="10" min="5" max="20"/>
        </div>
          <div class="input-group" id="view-scroll-x-group" style="display:none;">
            <label for="view-offset-x">–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏:</label>
            <input type="range" id="view-offset-x" min="0" value="0" step="1">
          </div>

          <div class="input-group" id="view-scroll-y-group" style="display:none;">
            <label for="view-offset-y">–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏:</label>
            <input type="range" id="view-offset-y" min="0" value="0" step="1">
          </div>
      </section>

      <section class="control-section">
        <h3>–ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞</h3>
        <div class="input-group">
          <label for="rule-select">–ü—Ä–∞–≤–∏–ª–æ:</label>
          <select id="rule-select">
            <option value="majority">–ü—Ä–∞–≤–∏–ª–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å —à—É–º–æ–º</option>
            <option value="vote">–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é</option>
            <option value="ising">Ising-–ø–æ–¥–æ–±–Ω–æ–µ (–ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ)</option>
            <option value="game-of-life">–ò–≥—Ä–∞ "–ñ–∏–∑–Ω—å" —Å —à—É–º–æ–º</option>
            <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ</option>
          </select>
        </div>
        <div class="input-group">
          <label id="noise-label" for="noise-prob">–ü–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–∞–≤–∏–ª–∞ (Œ∑):</label>
          <input type="range" id="noise-prob" min="0" max="1" step="0.01" value="0.10"/>
          <span id="noise-value">0.10</span>
        </div>
        <div class="input-group">
          <label for="states-count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π:</label>
          <input type="number" id="states-count" value="2" min="2" max="8"/>
        </div>
      </section>

      <section class="control-section">
        <h3>–ù–∞—á–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h3>
        <div class="input-group">
          <label for="initial-state">–¢–∏–ø:</label>
          <select id="initial-state">
            <option value="random">–°–ª—É—á–∞–π–Ω–æ–µ</option>
            <option value="center">–¢–æ—á–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ</option>
            <option value="checkerboard">–®–∞—Ö–º–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</option>
            <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ</option>
          </select>
        </div>
        <div class="input-group">
          <label for="density">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (–¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ):</label>
          <input type="range" id="density" min="0" max="1" step="0.1" value="0.5"/>
          <span id="density-value">0.5</span>
        </div>
      </section>

      <section class="control-section">
          <h3>–ü–∞—Ç—Ç–µ—Ä–Ω—ã</h3>
            <div class="preset-buttons">
                <button class="preset-btn" data-pattern="random">–°–ª—É—á–∞–π–Ω–∞—è (p –∏–∑ –ø–æ–ª–∑—É–Ω–∫–∞)</button>
                <button class="preset-btn" data-pattern="checkerboard">–®–∞—Ö–º–∞—Ç–∫–∞</button>
                <button class="preset-btn" data-pattern="stripes-v">–ü–æ–ª–æ—Å—ã (–≤–µ—Ä—Ç.)</button>
                <button class="preset-btn" data-pattern="two-domains">–î–≤–∞ –¥–æ–º–µ–Ω–∞</button>
                <button class="preset-btn" data-pattern="islands">–û—Å—Ç—Ä–æ–≤–∞</button>
                <button class="preset-btn" data-pattern="salt-pepper">–°–æ–ª—å-–ø–µ—Ä–µ—Ü (Œµ)</button>
                <button class="preset-btn" data-pattern="gradient-x">–ì—Ä–∞–¥–∏–µ–Ω—Ç (X)</button>
                <button class="preset-btn" data-pattern="percolation">–ü–µ—Ä–∫–æ–ª—è—Ü–∏—è (~0.59)</button>
                <button class="preset-btn" data-pattern="seed-line">–ó–∞—Ç—Ä–∞–≤–∫–∞: –ª–∏–Ω–∏—è</button>
                <button class="preset-btn" data-pattern="import-template">–ò–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–∞</button>
            </div>
  <!-- —Å–∫—Ä—ã—Ç—ã–π input –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ JSON -->
  <input type="file" id="template-file" accept=".json" style="display:none"/>
  <p class="hint">
    –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: ¬´—Ç–æ—á–∫–∞-–∑–∞—Ç—Ä–∞–≤–∫–∞¬ª ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–¢–æ—á–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ¬ª.
  </p>
</section>
    </aside>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <section class="visualization-panel">
      <div class="canvas-container">
        <canvas id="grid-canvas"></canvas>
      </div>
      <div class="simulation-info">
        <span>–®–∞–≥: <span id="step-counter">0</span></span>
        <span>–í—Ä–µ–º—è: <span id="time-counter">0</span>—Å</span>
        <span>–≠–Ω—Ç—Ä–æ–ø–∏—è: <span id="entropy-value">0.00</span></span>
      </div>
    </section>

    <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="metrics-panel">
      <section class="control-section">
        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π</h3>
        <div class="control-buttons">
          <button id="start-btn" class="btn primary">–°—Ç–∞—Ä—Ç</button>
          <button id="stop-btn" class="btn secondary" disabled>–°—Ç–æ–ø</button>
          <button id="step-btn" class="btn secondary">–ü–æ—à–∞–≥–æ–≤–æ</button>
          <button id="reset-btn" class="btn secondary">–°–±—Ä–æ—Å</button>
        </div>
        <div class="input-group">
          <label for="simulation-speed">–°–∫–æ—Ä–æ—Å—Ç—å:</label>
          <input type="range" id="simulation-speed" min="1" max="10" value="5"/>
          <span id="speed-value">5</span>
        </div>
      </section>

      <section class="control-section">
        <h3>–ú–µ—Ç—Ä–∏–∫–∏</h3>
        <div class="metrics-display">
          <div class="metric">
            <label>–≠–Ω—Ç—Ä–æ–ø–∏—è:</label>
            <span id="current-entropy">0.00</span>
          </div>
          <div class="metric">
            <label>–ü–∞—Ä–∞–º–µ—Ç—Ä –ø–æ—Ä—è–¥–∫–∞:</label>
            <span id="order-parameter">0.00</span>
          </div>
          <div class="metric">
            <label>–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–µ—Ç–∫–∏:</label>
            <span id="active-cells">0</span>
          </div>
        </div>
      </section>

      <section class="control-section">
        <h3>–ì—Ä–∞—Ñ–∏–∫–∏</h3>
        <div class="charts-container">
          <canvas id="entropy-chart"></canvas>
          <canvas id="order-chart"></canvas>
        </div>
      </section>

      <section class="control-section">
        <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
        <div class="export-buttons">
          <button id="export-grid" class="btn secondary">–≠–∫—Å–ø–æ—Ä—Ç —Å–µ—Ç–∫–∏</button>
          <button id="export-csv" class="btn secondary">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
          <button id="save-state" class="btn secondary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
          <button id="load-state" class="btn secondary">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
        </div>
      </section>
    </aside>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –±—É–¥—É—â–µ–µ) -->
  <div id="custom-rule-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ</h3>
    </div>
  </div>

  <!-- –í–ê–ñ–ù–û: –ø—É—Ç—å –æ—Å—Ç–∞–≤–∏–ª –∫–∞–∫ —É —Ç–µ–±—è -->
  <script type="module" src="scripts/main.js"></script>
</body>
</html>
