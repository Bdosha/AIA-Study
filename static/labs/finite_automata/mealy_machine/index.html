<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–°–∏–º—É–ª—è—Ç–æ—Ä –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ –ú–∏–ª–∏ - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤">
    <title>–°–∏–º—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∞ –ú–∏–ª–∏</title>
    
    <!-- Cytoscape.js –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
    
    <!-- –°—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ó–ê–ì–û–õ–û–í–û–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø -->
    <header class="app-header">
        <h1 class="header-title">–°–∏–º—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∞ –ú–∏–ª–∏</h1>
        <div class="header-controls">
            <button id="infoBtn" class="btn btn-small" title="–ü–æ–º–æ—â—å">
                ‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞
            </button>
            <button id="themeToggle" class="btn btn-small" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                üåô –¢–µ–º–∞
            </button>
        </div>
    </header>

    <!-- –û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï -->
    <div class="app-main">
        <!-- –ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <aside class="sidebar">
            <!-- –†–ê–ó–î–ï–õ: –ü–†–ê–í–ò–õ–ê –ê–í–¢–û–ú–ê–¢–ê -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∞</h2>
                
                <div class="form-group">
                    <label class="form-label" for="rulesInput">–ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤</label>
                    <textarea 
                        id="rulesInput" 
                        class="input" 
                        placeholder="state,input -> nextState,output&#10;–ü—Ä–∏–º–µ—Ä:&#10;s0,0 -> s0,0&#10;s0,1 -> s1,0&#10;s1,0 -> s0,1&#10;s1,1 -> s1,0">
                    </textarea>
                </div>

                <button id="applyRules" class="btn primary" style="width:100%">
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                </button>

                <!-- –ë–õ–û–ö –û–®–ò–ë–û–ö -->
                <div id="parseErrors" class="error-box" style="display:none;"></div>
            </div>

            <!-- –†–ê–ó–î–ï–õ: –ù–ê–ß–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ò –í–•–û–î–ù–ê–Ø –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º—É–ª—è—Ü–∏–∏</h2>
                
                <div class="form-group">
                    <label class="form-label" for="startState">–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</label>
                    <input 
                        type="text" 
                        id="startState" 
                        class="input" 
                        placeholder="s0" 
                        value="s0"
                    >
                </div>

                <div class="form-group">
                    <label class="form-label" for="inputSeq">–í—Ö–æ–¥–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                    <input 
                        type="text" 
                        id="inputSeq" 
                        class="input" 
                        placeholder="0110101"
                    >
                </div>
            </div>

            <!-- –†–ê–ó–î–ï–õ: –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ò–ú–£–õ–Ø–¶–ò–ï–ô -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                <div class="btn-group">
                    <button id="startSim" class="btn primary btn-small">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
                    <button id="stepSim" class="btn btn-small">‚è≠ –®–∞–≥</button>
                    <button id="stopSim" class="btn btn-small" disabled>‚è∏ –°—Ç–æ–ø</button>
                    <button id="resetSim" class="btn btn-small">üîÑ –°–±—Ä–æ—Å</button>
                </div>
            </div>

            <!-- –†–ê–ó–î–ï–õ: –°–¢–ê–¢–£–° –°–ò–ú–£–õ–Ø–¶–ò–ò -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–°—Ç–∞—Ç—É—Å</h2>
                <div class="status-area">
                    <div class="status-item">
                        <span class="status-label">–°–æ—Å—Ç–æ—è–Ω–∏–µ:</span>
                        <span id="currentState" class="status-value">‚Äî</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">–®–∞–≥:</span>
                        <span id="currentStep" class="status-value">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">–í—Ä–µ–º—è:</span>
                        <span id="simTime" class="status-value">00:00</span>
                    </div>
                </div>
            </div>

            <!-- –†–ê–ó–î–ï–õ: –ò–ú–ü–û–†–¢/–≠–ö–°–ü–û–†–¢ -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–§–∞–π–ª—ã</h2>
                <div class="btn-group">
                    <button id="importRules" class="btn btn-small">üì• –ò–º–ø–æ—Ä—Ç</button>
                    <button id="exportRules" class="btn btn-small">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
                </div>
                <input type="file" id="importFile" accept=".txt" style="display:none;">
            </div>

            <!-- –†–ê–ó–î–ï–õ: –ü–†–ï–°–ï–¢–´ -->
            <div class="sidebar-section">
                <h2 class="sidebar-title">–ü—Ä–∏–º–µ—Ä—ã</h2>
                <div class="preset-group">
                    <button class="preset-btn" data-preset="det01" title="–î–µ—Ç–µ–∫—Ç–æ—Ä '01'">
                        '01'
                    </button>
                    <button class="preset-btn" data-preset="det101" title="–î–µ—Ç–µ–∫—Ç–æ—Ä '101'">
                        '101'
                    </button>
                </div>
            </div>
        </aside>

        <!-- –û–°–ù–û–í–ù–ê–Ø –í–ò–ó–£–ê–õ–¨–ù–ê–Ø –û–ë–õ–ê–°–¢–¨ -->
        <main class="visual">
            <!-- –ì–†–ê–§ –ê–í–¢–û–ú–ê–¢–ê -->
            <div class="graph" id="graphContainer">
                <!-- Cytoscape –æ—Ç—Ä–∏—Å—É–µ—Ç –≥—Ä–∞—Ñ –∑–¥–µ—Å—å -->
            </div>

            <!-- –¢–ê–ë–õ–ò–¶–ê –ü–ï–†–ï–•–û–î–û–í –ò –í–´–í–û–î -->
            <div style="display: flex; gap: 10px; flex: 0 0 auto;">
                <!-- –¢–ê–ë–õ–ò–¶–ê –ü–ï–†–ï–•–û–î–û–í -->
                <div class="table-wrap" style="flex: 1;">
                    <table class="table" id="automatonTable">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>

                <!-- –û–ë–õ–ê–°–¢–¨ –í–´–í–û–î–ê -->
                <div style="flex: 1; display: flex; flex-direction: column; gap: 6px;">
                    <label class="form-label" style="margin: 0;">–í—ã—Ö–æ–¥–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                    <div class="output-area" id="outputArea"></div>
                    <button id="resetView" class="btn btn-small" style="width:100%">
                        –°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥ –≥—Ä–∞—Ñ–∞
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–ü–†–ê–í–ö–ò -->
    <div id="infoModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–°–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                <button class="modal-close" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
            </div>
            <div style="color: var(--text); line-height: 1.6; font-size: 14px;">
                <h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∞</h3>
                <p>
                    –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:<br>
                    <code>—Å–æ—Å—Ç–æ—è–Ω–∏–µ,–≤—Ö–æ–¥ -> —Å–ª–µ–¥—É—é—â–µ–µ_—Å–æ—Å—Ç–æ—è–Ω–∏–µ,–≤—ã—Ö–æ–¥</code>
                </p>
                <p>
                    –ü—Ä–∏–º–µ—Ä:<br>
                    <code>
                        s0,0 -> s0,0<br>
                        s0,1 -> s1,0<br>
                        s1,0 -> s0,1<br>
                        s1,1 -> s1,0
                    </code>
                </p>

                <h3>–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≥—Ä–∞—Ñ–æ–º</h3>
                <ul>
                    <li><strong>–î–≤–æ–π–Ω–æ–π —â–µ–ª—á–æ–∫ –Ω–∞ –ø—É—Å—Ç–æ–º –º–µ—Å—Ç–µ:</strong> –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—à–∏–Ω—É</li>
                    <li><strong>–î–≤–æ–π–Ω–æ–π —â–µ–ª—á–æ–∫ –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ:</strong> —É–¥–∞–ª–∏—Ç—å –≤–µ—Ä—à–∏–Ω—É</li>
                    <li><strong>–ö–ª–∏–∫ –Ω–∞ –≤–µ—Ä—à–∏–Ω—É (–≤—ã–±–æ—Ä):</strong> –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∏—Å—Ö–æ–¥–Ω—É—é</li>
                    <li><strong>–ö–ª–∏–∫ –Ω–∞ –¥—Ä—É–≥—É—é –≤–µ—Ä—à–∏–Ω—É:</strong> —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥</li>
                    <li><strong>–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≤–µ—Ä—à–∏–Ω—ã:</strong> –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é</li>
                </ul>

                <h3>–°–∏–º—É–ª—è—Ü–∏—è</h3>
                <ol>
                    <li>–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ <strong>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</strong></li>
                    <li>–£–∫–∞–∂–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—Ö–æ–¥–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ <strong>–°—Ç–∞—Ä—Ç</strong> –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</li>
                    <li>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <strong>–®–∞–≥</strong> –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞</li>
                </ol>

                <h3>–§–∞–π–ª—ã</h3>
                <ul>
                    <li><strong>–≠–∫—Å–ø–æ—Ä—Ç:</strong> —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–∞–π–ª</li>
                    <li><strong>–ò–º–ø–æ—Ä—Ç:</strong> –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ —Ñ–∞–π–ª–∞</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- === –ó–ê–ì–†–£–ó–ö–ê –°–ö–†–ò–ü–¢–û–í (–í–ê–ñ–ù–´–ô –ü–û–†–Ø–î–û–ö!) === -->
    
    <!-- –ü–∞—Ä—Å–µ—Ä –∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä -->
    <script src="automatonParser.js"></script>
    <script src="validator.js"></script>
    
    <!-- –Ø–¥—Ä–æ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ -->
    <script src="mealySimulator.js"></script>
    
    <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è -->
    <script src="graphVisualizer.js"></script>
    <script src="tableVisualizer.js"></script>
    <script src="animationManager.js"></script>
    
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π (–ü–ï–†–ï–î controlsManager!) -->
    <script src="themeSwitcher.js"></script>
    
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (–ü–û–°–õ–ï themeSwitcher!) -->
    <script src="controlsManager.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="main.js"></script>
</body>
</html>